<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kanji N5 Master - Luyện tập qua ngữ cảnh</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Sans+JP:wght@400;700&display=swap');
        
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background-color: #f8fafc;
        }

        .kanji-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .japanese-text {
            font-family: 'Noto Sans JP', sans-serif;
        }

        .correct-animation {
            animation: success-bounce 0.5s ease;
        }

        @keyframes success-bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .hidden-content {
            filter: blur(8px);
            user-select: none;
            transition: filter 0.3s ease;
        }

        .revealed {
            filter: blur(0);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 py-4 px-6 sticky top-0 z-10">
        <div class="max-w-4xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="bg-indigo-600 text-white p-2 rounded-lg">
                    <i class="fas fa-book-open"></i>
                </div>
                <h1 class="text-xl font-bold text-slate-800">Kanji N5 <span class="text-indigo-600">Context</span></h1>
            </div>
            <div class="flex items-center gap-4 text-sm font-medium text-slate-600">
                <span id="progress-text">Tiến độ: 0/0</span>
                <div class="w-32 h-2 bg-slate-200 rounded-full overflow-hidden">
                    <div id="progress-bar" class="h-full bg-indigo-600 transition-all duration-500" style="width: 0%"></div>
                </div>
            </div>
        </div>
    </header>

    <main class="flex-grow p-4 md:p-8">
        <div class="max-w-3xl mx-auto">
            
            <!-- Question Card -->
            <div id="game-card" class="kanji-card bg-white rounded-2xl shadow-sm border border-slate-200 p-8 mb-6">
                <div class="mb-8">
                    <span class="text-indigo-600 font-semibold text-sm uppercase tracking-wider">Câu hỏi</span>
                    <h2 id="vietnamese-sentence" class="text-2xl md:text-3xl font-bold text-slate-800 mt-2 leading-tight">
                        Đang tải câu hỏi...
                    </h2>
                </div>

                <!-- Hidden Japanese Section -->
                <div class="space-y-6">
                    <div class="bg-slate-50 rounded-xl p-6 border border-slate-100">
                        <div class="mb-4">
                            <label class="text-xs font-bold text-slate-400 uppercase">Cách đọc (Hiragana)</label>
                            <p id="hiragana-text" class="japanese-text text-lg text-slate-600 hidden-content mt-1">
                                Hiragana placeholder
                            </p>
                        </div>
                        <div>
                            <label class="text-xs font-bold text-slate-400 uppercase">Đáp án Kanji</label>
                            <p id="kanji-text" class="japanese-text text-3xl font-bold text-indigo-900 hidden-content mt-2">
                                Kanji placeholder
                            </p>
                        </div>
                    </div>

                    <!-- Controls -->
                    <div class="flex flex-wrap gap-3">
                        <button id="btn-hint" class="flex-1 bg-white border border-slate-300 hover:border-indigo-400 text-slate-700 font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center gap-2">
                            <i class="far fa-eye"></i> Hiện Gợi Ý
                        </button>
                        <button id="btn-reveal" class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-6 rounded-xl shadow-lg shadow-indigo-100 transition-all flex items-center justify-center gap-2">
                            <i class="fas fa-check-circle"></i> Xem Đáp Áán
                        </button>
                    </div>
                </div>
            </div>

            <!-- Explanation Section (Hidden by default) -->
            <div id="explanation-box" class="hidden animate-in fade-in slide-in-from-bottom-4 duration-500">
                <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="bg-slate-50 px-6 py-4 border-b border-slate-200">
                        <h3 class="font-bold text-slate-800 flex items-center gap-2">
                            <i class="fas fa-info-circle text-indigo-500"></i> Phân tích Kanji
                        </h3>
                    </div>
                    <div id="kanji-details" class="p-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Kanji info items will be injected here -->
                    </div>
                    <div class="p-6 pt-0">
                        <button id="btn-next" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-4 px-6 rounded-xl transition-all flex items-center justify-center gap-2">
                            Câu tiếp theo <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Footer -->
    <footer class="py-6 text-center text-slate-400 text-sm">
        <p>© 2024 Kanji N5 Master - Học tập mỗi ngày</p>
    </footer>

    <!-- Custom Modal/Toast for Feedback -->
    <div id="message-box" class="fixed bottom-8 left-1/2 -translate-x-1/2 bg-slate-800 text-white px-6 py-3 rounded-full shadow-2xl opacity-0 transition-opacity pointer-events-none z-50">
        Bạn đã xem đáp án! Hãy cố gắng nhớ nhé.
    </div>

    <script>
        // Database câu hỏi N5
        const quizData = [
            {
                vi: "Tôi ăn cơm.",
                ja: "ご飯を<span>食</span>べます。",
                hira: "ごはんをたべます。",
                kanji: [
                    { char: "食", hanviet: "THỰC", mean: "Ăn", on: "ショク", kun: "た・べる" }
                ]
            },
            {
                vi: "Hôm nay là thứ Hai.",
                ja: "<span>今日</span>は<span>月曜日</span>です。",
                hira: "きょうはげつようびです。",
                kanji: [
                    { char: "今日", hanviet: "KIM NHẬT", mean: "Hôm nay", on: "-", kun: "きょう" },
                    { char: "月", hanviet: "NGUYỆT", mean: "Mặt trăng/Tháng", on: "ゲツ", kun: "つき" },
                    { char: "曜", hanviet: "DIỆU", mean: "Thứ (trong tuần)", on: "ヨウ", kun: "-" }
                ]
            },
            {
                vi: "Tôi đi đến trường học.",
                ja: "<span>学校</span>へ<span>行</span>きます。",
                hira: "がっこうへいきます。",
                kanji: [
                    { char: "学", hanviet: "HỌC", mean: "Học tập", on: "ガク", kun: "まな・ぶ" },
                    { char: "校", hanviet: "HIỆU", mean: "Trường học", on: "コウ", kun: "-" },
                    { char: "行", hanviet: "HÀNH", mean: "Đi", on: "コウ", kun: "い・く" }
                ]
            },
            {
                vi: "Nước này lạnh.",
                ja: "この<span>水</span>は<span>冷</span>たいです。",
                hira: "このみずはつめたいです。",
                kanji: [
                    { char: "水", hanviet: "THỦY", mean: "Nước", on: "スイ", kun: "みず" },
                    { char: "冷", hanviet: "LÃNH", mean: "Lạnh", on: "レイ", kun: "つめ・たい" }
                ]
            },
            {
                vi: "Người đó là thầy giáo.",
                ja: "あの<span>人</span>は<span>先生</span>です。",
                hira: "あのひとはせんせいです。",
                kanji: [
                    { char: "人", hanviet: "NHÂN", mean: "Người", on: "ジン / ニン", kun: "ひと" },
                    { char: "先", hanviet: "TIÊN", mean: "Trước", on: "セン", kun: "さき" },
                    { char: "生", hanviet: "SINH", mean: "Sinh ra/Sống", on: "セイ", kun: "う・まれる" }
                ]
            }
        ];

        let currentIndex = 0;

        // Elements
        const viText = document.getElementById('vietnamese-sentence');
        const hiraText = document.getElementById('hiragana-text');
        const kanjiText = document.getElementById('kanji-text');
        const kanjiDetails = document.getElementById('kanji-details');
        const explanationBox = document.getElementById('explanation-box');
        const btnHint = document.getElementById('btn-hint');
        const btnReveal = document.getElementById('btn-reveal');
        const btnNext = document.getElementById('btn-next');
        const progressText = document.getElementById('progress-text');
        const progressBar = document.getElementById('progress-bar');
        const messageBox = document.getElementById('message-box');

        function initQuiz() {
            renderQuestion();
            updateProgress();
        }

        function renderQuestion() {
            const data = quizData[currentIndex];
            viText.innerText = data.vi;
            hiraText.innerText = data.hira;
            kanjiText.innerHTML = data.ja;
            
            // Clear old data
            hiraText.classList.remove('revealed');
            kanjiText.classList.remove('revealed');
            explanationBox.classList.add('hidden');
            
            // Render Kanji Details
            kanjiDetails.innerHTML = '';
            data.kanji.forEach(k => {
                const div = document.createElement('div');
                div.className = "p-4 border border-slate-100 rounded-xl bg-slate-50";
                div.innerHTML = `
                    <div class="flex items-center gap-3 mb-2">
                        <span class="text-3xl font-bold text-indigo-600 japanese-text">${k.char}</span>
                        <div>
                            <p class="text-xs font-bold text-slate-400 uppercase">Hán Việt</p>
                            <p class="font-bold text-slate-700">${k.hanviet}</p>
                        </div>
                    </div>
                    <div class="space-y-1 text-sm">
                        <p><span class="text-slate-400">Nghĩa:</span> ${k.mean}</p>
                        <p><span class="text-slate-400">Onyomi:</span> ${k.on}</p>
                        <p><span class="text-slate-400">Kunyomi:</span> ${k.kun}</p>
                    </div>
                `;
                kanjiDetails.appendChild(div);
            });
        }

        function updateProgress() {
            const progress = ((currentIndex) / quizData.length) * 100;
            progressText.innerText = `Tiến độ: ${currentIndex + 1}/${quizData.length}`;
            progressBar.style.width = `${((currentIndex + 1) / quizData.length) * 100}%`;
        }

        function showMessage(msg) {
            messageBox.innerText = msg;
            messageBox.style.opacity = '1';
            setTimeout(() => {
                messageBox.style.opacity = '0';
            }, 2000);
        }

        // Events
        btnHint.addEventListener('click', () => {
            hiraText.classList.add('revealed');
            showMessage("Đã hiện gợi ý Hiragana!");
        });

        btnReveal.addEventListener('click', () => {
            hiraText.classList.add('revealed');
            kanjiText.classList.add('revealed');
            explanationBox.classList.remove('hidden');
            document.getElementById('game-card').classList.add('correct-animation');
            setTimeout(() => {
                document.getElementById('game-card').classList.remove('correct-animation');
            }, 500);
        });

        btnNext.addEventListener('click', () => {
            currentIndex++;
            if (currentIndex >= quizData.length) {
                currentIndex = 0; // Loop back for this demo
                showMessage("Chúc mừng! Bạn đã hoàn thành bộ N5 này.");
            }
            renderQuestion();
            updateProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Initialize
        window.onload = initQuiz;
    </script>
</body>
</html>
